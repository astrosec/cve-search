import java.net.URL;
import java.net.URLConnection;
import java.net.HttpURLConnection;
import java.util.Scanner;
import java.io.File;
import java.io.IOException;
import java.io.FileWriter;

public class queryOutput{

    public queryOutput() throws IOException{
        
        Scanner scan = new Scanner(new File("output.txt"));
        String url = "http://localhost:5000/api/search-vendor/ven/";
        Scanner sc = new Scanner(System.in);
        FileWriter writer = new FileWriter("response.txt");
       	System.out.println("Query Starting..."); 
	int index=0;
        while(scan.hasNextLine()){
            
            String line = scan.nextLine();
	    String line2 = scan.nextLine();
	    System.out.println(url+line+"/"+line2);
            URL u = new URL(url+line+"/"+line2);
            HttpURLConnection connection = (HttpURLConnection)u.openConnection();
            connection.setRequestMethod("GET");
            connection.connect();
            if(connection.getResponseCode() != 200)
                System.out.println(u + " Connection Error: " + connection.getResponseCode());
	 
            else{
               sc = new Scanner(u.openStream());
		
                while(sc.hasNext()){
                    writer.write(sc.nextLine() + "\n");
                }
	//	sc = new Scanner(connection.getInputStream()).useDelimiter("\\Z");
	//	writer.write(sc.next()+"\n");
            }
	    System.out.println(index++);

        }
        writer.close();
        sc.close();
        scan.close();
	System.out.println("Querying ended...");
    }
}
